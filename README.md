# 自动化交易工具

这是一个用于浏览器端的自动化交易脚本集合，可以在交易平台上自动执行开多仓和开空仓操作。

## 📋 项目简介

本项目包含4个自动化交易脚本，用于在交易平台上实现自动化的交易操作。每个脚本都实现了不同的交易策略和按钮选择方式。

## 📁 文件说明

### 脚本分类

#### 按交易策略分类：

- **`long_*.js`** - 先开多仓策略
  - 执行流程：整点开多仓 → 休眠 → 开空仓

- **`short_*.js`** - 先开空仓策略
  - 执行流程：整点开空仓 → 休眠 → 开多仓

#### 按按钮选择方式分类：

- **`*_lighter.js`** - 使用详细的按钮选择器
  - 通过按钮文本和CSS类名进行精确匹配
  - 适用于更复杂的UI结构

- **`*_var.js`** - 使用简化的按钮选择器
  - 通过按钮文本和SVG图标进行匹配
  - 使用 `data-testid` 选择器定位提交按钮

### 文件列表

| 文件名 | 策略 | 选择器类型 | 休眠时间 |
|--------|------|-----------|---------|
| `long_lighter.js` | 先开多仓 | 详细（CSS类名） | 6500秒（开多仓后） |
| `long_var.js` | 先开多仓 | 简化（SVG图标） | 1650秒（开多仓后） |
| `short_lighter.js` | 先开空仓 | 详细（CSS类名） | 1650秒（开空仓后） |
| `short_var.js` | 先开空仓 | 简化（SVG图标） | 6500秒（开空仓后） |

## 🚀 使用方法

### 1. 在浏览器中打开交易平台

确保你已经登录到目标交易平台，并打开了交易页面。

### 2. 打开浏览器开发者工具

- **Chrome/Edge**: 按 `F12` 或 `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)
- **Firefox**: 按 `F12` 或 `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)

### 3. 切换到 Console（控制台）标签

在开发者工具中找到并点击 "Console" 标签页。

### 4. 复制并粘贴脚本

根据你的需求选择合适的脚本，复制其全部内容，粘贴到控制台中，然后按 `Enter` 执行。

### 5. 脚本会自动开始运行

脚本执行后会自动：
- 等待下一分钟的整点（00秒）
- 执行开仓操作
- 休眠指定时间
- 执行反向开仓操作
- 循环执行

## ⚙️ 配置说明

### long_lighter.js / short_lighter.js 配置

```javascript
const config = {
    maxRetries: 99,              // 最大重试次数
    retryDelay: 1000,            // 重试延迟（毫秒）
    sleepDuration: 6500000,      // 休眠时间（毫秒）
    executionInterval: 60000,    // 执行间隔（毫秒）
    longButtonText: '买入 / 做多', // 做多按钮文本
    shortButtonText: '卖出 / 做空', // 做空按钮文本
    submitButtonText: '下达市场订单', // 提交按钮文本
    clickDelay: 500,            // UI更新延迟（毫秒）
    maxIterations: 10000,       // 最大迭代次数
    enableSafetyChecks: true    // 启用安全检测
};
```

### long_var.js / short_var.js 配置

```javascript
const CONFIG = {
    sleepAfterLong: 1650000,     // 开多仓后休眠时间（毫秒）
    sleepAfterShort: 6500000,    // 开空仓后休眠时间（毫秒）
    waitBeforeRetry: 1000,       // 重试前等待时间（毫秒）
    uiUpdateDelay: 500,          // UI更新等待时间（毫秒）
    longMaxRetries: 99,          // 开多仓最大重试次数
    shortMaxRetries: 99,         // 开空仓最大重试次数
    longButtonText: '买',        // 开多仓按钮文字
    shortButtonText: '卖',       // 开空仓按钮文字
    submitButtonSelector: 'button[data-testid="submit-button"]' // 提交按钮选择器
};
```

## 🎮 控制命令

### long_lighter.js / short_lighter.js

在浏览器控制台中可以使用以下命令：

```javascript
// 停止脚本
stopReverseTrading()

// 获取当前状态
getReverseTradingStatus()

// 更新配置
updateTradingConfig({
    sleepDuration: 100000,  // 修改休眠时间
    maxRetries: 50          // 修改重试次数
})
```

### long_var.js / short_var.js

在浏览器控制台中可以使用以下命令：

```javascript
// 停止脚本
stopTrading()

// 获取当前状态
getTradingStatus()
```

## 📊 功能特性

- ✅ **自动定时执行** - 每分钟整点自动执行交易操作
- ✅ **智能重试机制** - 操作失败时自动重试，最多重试99次
- ✅ **休眠控制** - 开仓后自动休眠指定时间再执行反向操作
- ✅ **安全限制** - 内置最大迭代次数限制，防止无限循环
- ✅ **状态监控** - 可通过控制台命令查询脚本运行状态
- ✅ **灵活配置** - 支持运行时修改配置参数
- ✅ **详细日志** - 控制台输出详细的操作日志

## ⚠️ 注意事项

1. **风险提示**：自动化交易存在风险，请谨慎使用。建议先在模拟环境中测试。

2. **平台兼容性**：脚本针对特定的交易平台UI设计，如果平台更新UI，可能需要调整按钮选择器。

3. **网络稳定性**：确保网络连接稳定，避免因网络问题导致操作失败。

4. **资金管理**：请合理设置交易金额，不要使用超出承受能力的资金。

5. **监控运行**：建议定期检查脚本运行状态，确保按预期执行。

6. **浏览器兼容性**：建议使用 Chrome、Edge 或 Firefox 等现代浏览器。

## 🔧 故障排除

### 脚本无法找到按钮

- 检查交易页面是否已完全加载
- 确认按钮文本是否与配置中的文本匹配
- 如果平台UI更新，可能需要修改按钮选择器配置

### 脚本执行失败

- 检查浏览器控制台的错误信息
- 确认网络连接正常
- 验证交易账户是否有足够的资金或权限

### 停止脚本

如果脚本出现异常，可以在控制台执行停止命令：
- `stopReverseTrading()` (lighter版本)
- `stopTrading()` (var版本)

或者直接刷新页面。

## 📝 更新日志

- 初始版本：包含4个基础交易脚本
- 支持多种交易策略（先开多/先开空）
- 支持不同的按钮选择方式
- 内置重试机制和安全限制

## 📄 许可证

本项目仅供学习和研究使用。使用本工具进行实际交易的风险由使用者自行承担。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进本项目。

---

**免责声明**：本工具仅供学习和研究目的。使用自动化交易工具进行实际交易存在风险，可能导致资金损失。使用者需自行承担所有风险和责任。

